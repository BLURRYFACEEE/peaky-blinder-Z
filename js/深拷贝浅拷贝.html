<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        const a = {
            "status": 0,
                "msg": "success",
                    "result": [{
                        "menuId": 2,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": -1,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 4,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 5,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 62,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 75,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 6,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 7,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 8,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 9,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 86,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 10,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 11,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 12,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 13,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 14,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 15,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 64,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 65,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 72,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 73,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 63,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 70,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }, {
                        "menuId": 76,
                        "menuName": null,
                        "menuType": null,
                        "remark": null,
                        "roleId": null,
                        "roleName": null,
                        "children": null,
                        "pmenuId": null
                    }]
        }

        // 浅拷贝
        // 1 直接赋值
        // 2 Object.assign()赋值（可以处理对象一层深拷贝）
        // const a = {
        //     name: 'hsz',
        //     age: 18,
        //     like: {
        //         body: 'foot',
        //         person: 11
        //     }
        // }
        // const b = Object.assign({}, a)
        // a.like.body = 'hands'
        // console.log('浅拷贝：')
        // console.log(b)
        // 深拷贝
        // 1 JSON字符串转换 (不适用于function、会把constructor直接转化为对象)
        // const c = JSON.parse(JSON.stringify(a))
        // a.like.body = 'hands'
        // console.log('深拷贝：')
        // console.log(c)
        // 2 遍历拷贝
        function deepClone(initObj, finalObj) {
            var obj = finalObj || {}
            for (let i in initObj) {
                var prop = initObj[i]
                if (prop === obj) {
                    continue;
                }
                if (typeof prop === 'object') {
                    obj[i] = prop.constructor === 'array' ? [] : {}
                    arguments.callee(prop, obj[i])
                } else {
                    obj[i] = prop
                }
            }
            return obj
        }
        // 3 使用Object.create直接深拷贝对象属性
        function deepClone2(initObj, finalObj) {
            var obj = finalObj || {}
            for (let i in initObj) {
                var prop = initObj[i]
                if (prop === obj) {
                    continue;
                }
                if (typeof prop === 'object') {
                    // console.log('obj3')
                    obj[i] = typeof prop === 'array' ? [] : {}
                    obj[i] = Object.create(prop)
                } else {
                    obj[i] = prop
                }
            }
            return obj
        }
        // deepClone2(a)
        function deepClone3(initalObj, finalObj) {
            var obj = finalObj || {};
            for (var i in initalObj) {
                var prop = initalObj[i];        // 避免相互引用对象导致死循环，如initalObj.a = initalObj的情况
                if (prop === obj) {
                    continue;
                }
                if (typeof prop === 'object') {
                    obj[i] = (prop.constructor === Array) ? [] : Object.create(prop);
                } else {
                    obj[i] = prop;
                }
            }
            return obj;
        }
        var objInit = {
          a: 1,
          b: { f: { g: 1 } },
          c: [1, 2, 3]
        }
        var obj233 = deepClone(objInit)
        objInit.a = 2333
        console.log(deepClone(obj233))
    </script>
</body>

</html>
